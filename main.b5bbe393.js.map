{"version":3,"sources":["scripts/main.js"],"names":["workerData","thead","document","querySelector","tbody","clickCounts","collect","allWorkers","theadElements","forEach","worker","workerInfo","j","length","innerText","children","push","sort","list","sortLine","direction","copyOfList","sortString","sortNumbers","sortSalary","personA","personB","fromDollars","localeCompare","salary","replace","changeData","index","addEventListener","e","querySelectorAll","hasOwnProperty","target","sortedData","key","className","closest","body","form","insertAdjacentHTML","data","formField","numberToDollars","toLocaleString","preventDefault","FormData","get","pushNotification","value","newEmployer","input","posTop","posRight","title","description","type","messageBody","createElement","messageTitle","messageText","dataset","qa","style","top","right","letterSpacing","append","setTimeout","remove"],"mappings":"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","file":"main.b5bbe393.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst thead = document.querySelector('thead').querySelector('tr');\nconst tbody = document.querySelector('tbody');\nlet workerData;\nconst clickCounts = {};\n\n// #region sorting\n\nthead.addEventListener('click', (e) => {\n  workerData = [];\n\n  const allWorkers = [...document.querySelector('tbody')\n    .querySelectorAll('tr')];\n  const theadElements = [...document.querySelector('thead')\n    .querySelectorAll('th')];\n\n  collect(allWorkers, theadElements);\n\n  if (!clickCounts.hasOwnProperty(`${e.target.innerText}`)) {\n    clickCounts[e.target.innerText] = 0;\n  }\n\n  // eslint-disable-next-line max-len\n  const sortedData = sort(\n    workerData,\n    e.target.innerText,\n    clickCounts[e.target.innerText]\n  );\n\n  clickCounts[e.target.innerText]++;\n\n  for (const key in clickCounts) {\n    if (key !== e.target.innerText) {\n      clickCounts[key] = 0;\n    }\n  }\n\n  changeData(allWorkers, theadElements, sortedData);\n});\n\nfunction collect(allWorkers, theadElements) {\n  allWorkers.forEach((worker) => {\n    const workerInfo = {};\n\n    for (let j = 0; j < theadElements.length; j++) {\n      workerInfo[theadElements[j].innerText] = worker.children[j].innerText;\n    }\n\n    workerData.push(workerInfo);\n  });\n}\n\nfunction sort(list, sortLine, direction) {\n  const copyOfList = [...list];\n\n  switch (sortLine) {\n    case 'Name':\n    case 'Position':\n    case 'Office':\n      return sortString(copyOfList, sortLine, direction);\n    case 'Age':\n      return sortNumbers(copyOfList, sortLine, direction);\n    case 'Salary':\n      return sortSalary(copyOfList, sortLine, direction);\n  }\n}\n\nfunction sortSalary(list, sortLine, direction) {\n  const copyOfList = [...list];\n\n  return copyOfList\n    .sort((personA, personB) => {\n      return direction % 2 === 0\n        ? fromDollars(personA[sortLine]) - fromDollars(personB[sortLine])\n        : fromDollars(personB[sortLine]) - fromDollars(personA[sortLine]);\n    });\n}\n\nfunction sortNumbers(list, sortLine, direction) {\n  const copyOfList = [...list];\n\n  return copyOfList\n    .sort((personA, personB) => {\n      return direction % 2 === 0\n        ? personA[sortLine] - personB[sortLine]\n        : personB[sortLine] - personA[sortLine];\n    });\n}\n\nfunction sortString(list, sortLine, direction) {\n  const copyOfList = [...list];\n\n  return copyOfList\n    .sort((personA, personB) => {\n      return direction % 2 === 0\n        ? personA[sortLine].localeCompare(personB[sortLine])\n        : personB[sortLine].localeCompare(personA[sortLine]);\n    });\n}\n\nfunction fromDollars(salary) {\n  return +salary.replace(/[$,]/g, '');\n}\n\nfunction changeData(allWorkers, theadElements, list) {\n  allWorkers.forEach((worker, index) => {\n    for (let j = 0; j < worker.children.length; j++) {\n      worker.children[j].innerText = list[index][theadElements[j].innerText];\n    }\n  });\n}\n\n// #endregion\n\n// #region selection\n\ntbody.addEventListener('click', (e) => {\n  for (const child of tbody.children) {\n    child.className = '';\n  }\n\n  e.target.closest('tr').className += 'active';\n});\n\n// #endregion\n\n// #region adding form\n\nconst body = document.querySelector('body');\n\nconst form = `\n  <form action='#' method='post' class='new-employee-form'>\n    <label>Name:\n      <input\n        name=\"name\"\n        type=\"text\"\n        data-qa=\"name\"\n        required\n      >\n    </label>\n\n    <label>Position:\n      <input\n        name=\"position\"\n        type=\"text\"\n        data-qa=\"position\"\n        required\n      >\n    </label>\n\n    <label>Office:\n      <select\n        name=\"office\"\n        data-qa=\"office\"\n        required\n      >\n        <option value='Tokyo'>Tokyo</option>\n        <option value='Singapore'>Singapore</option>\n        <option value='London'>London</option>\n        <option value='New York'>New York</option>\n        <option value='Edinburgh'>Edinburgh</option>\n        <option value='San Francisco'>San Francisco</option>\n      </select>\n    </label>\n\n    <label>Age:\n      <input\n        name=\"age\"\n        type=\"number\"\n        data-qa=\"age\"\n        required\n      >\n    </label>\n\n    <label>Salary:\n      <input\n        name=\"salary\"\n        type=\"number\"\n        data-qa=\"salary\"\n        required\n      >\n    </label>\n    <button type='submit'>Save to table</button>\n  </form>\n`;\n\nbody.insertAdjacentHTML('beforeend', form);\n\n// #endregion\n\n// #region collect data\n\nconst formField = document.querySelector('form');\nlet data;\n\nformField.addEventListener('submit', (e) => {\n  e.preventDefault();\n\n  data = new FormData(formField);\n\n  if (data.get('name').replace(/[\\d\\s]/g, '').length < 4) {\n    pushNotification(10, 10, 'Incorrect name input',\n      'Worker name\\n '\n      + 'has less than 4 letters', 'error');\n    document.querySelector('input[data-qa=\"name\"]').value = '';\n\n    return;\n  }\n\n  if (+data.get('age') < 18 || +data.get('age') > 90) {\n    pushNotification(10, 10, 'Incorrect age input',\n      'Worker age\\n '\n      + 'need to be between 18 and 90', 'error');\n    document.querySelector('input[data-qa=\"age\"]').value = '';\n\n    return;\n  }\n\n  const newEmployer = `\n  <tr>\n    <td>${data.get('name')}</td>\n    <td>${data.get('position')}</td>\n    <td>${data.get('office')}</td>\n    <td>${data.get('age')}</td>\n    <td>${numberToDollars(data.get('salary'))}</td>\n  </tr>\n  `;\n\n  tbody.insertAdjacentHTML('afterbegin', newEmployer);\n\n  pushNotification(10, 10, 'New worker card was added',\n    '', 'success');\n\n  document.querySelectorAll('input').forEach(input => {\n    input.value = '';\n  });\n\n  document.querySelector('select').value = 'Tokyo';\n});\n\nfunction numberToDollars(salary) {\n  return `$${(+salary).toLocaleString('en')}`;\n}\n\n// #endregion\n\n// #region notifications\n\nconst pushNotification = (posTop, posRight, title, description, type) => {\n  const messageBody = document.createElement('div');\n  const messageTitle = document.createElement('h2');\n  const messageText = document.createElement('p');\n\n  messageBody.className = `notification ${type}`;\n  messageBody.dataset.qa = `notification`;\n  messageTitle.className = 'title';\n  messageBody.style.top = `${posTop}px`;\n  messageBody.style.right = `${posRight}px`;\n  messageTitle.style.letterSpacing = '-1px';\n  messageTitle.innerText = title;\n  messageText.innerText = description;\n  messageBody.append(messageTitle, messageText);\n\n  body.append(messageBody);\n\n  setTimeout(() => {\n    messageBody.remove();\n  }, 3500);\n};\n\n// #endregion\n"]}